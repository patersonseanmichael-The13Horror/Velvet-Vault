<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Velvet Vault — Slots</title>

  <link rel="stylesheet" href="css/vv.tokens.css">
  <link rel="stylesheet" href="css/vv.base.css">
  <link rel="stylesheet" href="css/vv.components.css">
  <link rel="stylesheet" href="css/velvet.css">
  <link rel="stylesheet" href="css/rebirth.css">
  <link rel="stylesheet" href="css/story.css">
  <link rel="stylesheet" href="css/phase4.css">
  <link rel="stylesheet" href="css/pages/slots.css">

  <!-- ✅ Auth + Wallet -->
  <script type="module" src="js/firebase-init.js"></script>
  <script type="module" src="js/guard.js"></script>
  <script type="module" src="js/wallet.js"></script>

  
</head>

<body data-chapter="games">
  <div class="vv-bg" aria-hidden="true">
    <div class="vv-bg__layer layer-a"></div>
    <div class="vv-bg__tint"></div>
    <div class="vv-bg__vignette"></div>
    <div class="vv-grain"></div>
  </div>

  <div class="vv-hud" aria-label="Story progress">
    <div class="vv-badge">
      <div class="vv-badge__top">
        <p class="vv-badge__title">Vault Progress</p>
        <span class="vv-badge__pct" data-vv-pct>—%</span>
      </div>
      <div class="vv-bar"><div data-vv-bar></div></div>
      <div class="vv-badge__links">
        <a class="vv-miniLink" href="members.html" data-unlock-key="vip">VIP Floor</a>
        <a class="vv-miniLink" href="terms.html" data-unlock-key="terms">House Rules</a>
      </div>
    </div>
  </div>

  <section class="vv-chapter" aria-label="Chapter intro">
    <div class="vv-chapter__inner">
      <div>
        <p class="vv-chapter__kicker">Games Wing</p>
        <h1 class="vv-chapter__title">Slots — The Neon Chorus</h1>
        <p class="vv-chapter__desc">Lights sing. Reels whisper. Luck shows up when it feels admired.</p>
      </div>
      <div class="vv-chapter__actions">
        <a class="btn primary" href="members.html">Back to Lobby</a>
        <a class="btn" href="roulette.html">Back to Roulette</a>
      </div>
    </div>
  </section>
<meta name="vv-protected" content="true">
<header id="vv-topbar"></header>

<main class="page slotsPage">
  <section class="grid">
    <!-- Machine -->
    <article class="card">
      <div class="cardHead">
        <div>
          <h2>Neon Reels</h2>
          <small>3×3 window with <b>Top / Mid / Bottom</b> paylines. Bet debits once per spin. Wins credit + log.</small>
        </div>
        <div class="pill">Wallet: <b id="balance">—</b></div>
      </div>

      <div class="cardBody">
        <div class="machine">
          <div class="slotsTop">
            <div class="slotsTitle">
              <div class="kicker">Games Wing</div>
              <h1>Slots — Themed Machines</h1>
              <p class="sub">Pick a machine. Each has unique symbols, features, and vibe.</p>
            </div>

            <div class="slotsPicker">
              <label class="pickLabel" for="machineSelect">Machine</label>
              <select id="machineSelect" aria-label="Select slot machine"></select>
              <button class="chipBtn" id="paytableBtn" type="button">Paytable</button>
            </div>
          </div>

          <div class="frame">
            <div class="slotsShell">
              <div class="reelsWrap">
                <div class="reelCol" id="col1">
                  <div class="cell" id="c1r1">◆</div>
                  <div class="cell" id="c1r2">◆</div>
                  <div class="cell" id="c1r3">◆</div>
                </div>
                <div class="reelCol" id="col2">
                  <div class="cell" id="c2r1">◆</div>
                  <div class="cell" id="c2r2">◆</div>
                  <div class="cell" id="c2r3">◆</div>
                </div>
                <div class="reelCol" id="col3">
                  <div class="cell" id="c3r1">◆</div>
                  <div class="cell" id="c3r2">◆</div>
                  <div class="cell" id="c3r3">◆</div>
                </div>
                <div class="reelCol" id="col4">
                  <div class="cell" id="c4r1">◆</div>
                  <div class="cell" id="c4r2">◆</div>
                  <div class="cell" id="c4r3">◆</div>
                </div>
                <div class="reelCol" id="col5">
                  <div class="cell" id="c5r1">◆</div>
                  <div class="cell" id="c5r2">◆</div>
                  <div class="cell" id="c5r3">◆</div>
                </div>

                <div class="paylines" id="paylines" aria-hidden="true"></div>
              </div>
            </div>
          </div>

          <div class="hud">
            <div class="pill">Bet: <b id="betLabel">150</b> GOLD</div>
            <div class="pill">Line Bet: <b id="lineBetLabel">50</b> GOLD</div>
            <div class="pill">Last Mult: <b id="multLabel">—</b></div>
            <div class="pill">Auto: <b id="autoLabel">OFF</b></div>
          </div>

          <div class="controls">
            <button class="btn" id="betDown">Bet −</button>
            <button class="btn" id="betUp">Bet +</button>
            <button class="btn green" id="spinBtn">Spin</button>
            <button class="btn red" id="maxBtn">Max Bet</button>
          </div>

          <div class="inline">
            <div class="pill" style="margin:0;">Auto Spins</div>
            <select id="autoCount">
              <option value="5">5</option>
              <option value="10" selected>10</option>
              <option value="25">25</option>
              <option value="50">50</option>
            </select>
            <button class="btn green" id="autoBtn" style="min-width:190px; flex:0 0 auto;">Auto-Spin</button>
            <button class="btn red" id="stopBtn" style="min-width:190px; flex:0 0 auto;" disabled>Stop</button>
          </div>

          <div class="result" id="result">Awaiting signal…</div>

          <!-- Paytable Modal -->
          <div class="vvModal" id="paytableModal" aria-hidden="true">
            <div class="vvModalCard" role="dialog" aria-modal="true" aria-label="Paytable">
              <div class="vvModalHead">
                <div>
                  <div class="kicker" id="paytableKicker">Paytable</div>
                  <h2 id="paytableTitle" style="margin:6px 0 0;">Machine</h2>
                </div>
                <button class="chipBtn" id="paytableClose" type="button">Close</button>
              </div>
              <div class="vvModalBody" id="paytableBody"></div>
            </div>
          </div>

          <!-- Hold & Win Feature Modal -->
          <div class="vvModal" id="holdWinModal" aria-hidden="true">
            <div class="vvModalCard" role="dialog" aria-modal="true" aria-label="Hold and Win Feature">
              <div class="vvModalHead">
                <div>
                  <div class="kicker">Feature</div>
                  <h2 style="margin:6px 0 0;">Hold &amp; Win</h2>
                  <p class="sub" style="margin:6px 0 0;">Coins lock. You have 3 respins to fill the grid.</p>
                </div>
                <button class="chipBtn" id="holdWinClose" type="button">Close</button>
              </div>
              <div class="vvModalBody">
                <div class="holdWinTop">
                  <div class="pill">Respins: <b id="respinsLeft">3</b></div>
                  <div class="pill">Feature Total: <b id="holdWinTotal">0</b></div>
                  <button class="btn primary" id="holdWinSpin" type="button">RESPIN</button>
                </div>
                <div class="holdWinGrid" id="holdWinGrid" aria-label="Hold and Win Grid"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </article>

    <!-- Payouts -->
    <aside class="card">
      <div class="cardHead">
        <div>
          <h2>Payouts</h2>
          <small>Wins are calculated per payline and summed. Bonus triggers on <b>exactly two ★</b> in a line.</small>
        </div>
        <a class="chip" href="ledger.html">View Ledger</a>
      </div>

      <div class="cardBody">
        <div class="list">
          <div class="item"><div><b>Jackpot</b><br><small>★★★ on any line</small></div><div><b>×25</b></div></div>
          <div class="item"><div><b>Vault Hit</b><br><small>♛♛♛ on any line</small></div><div><b>×15</b></div></div>
          <div class="item"><div><b>3 of a kind</b><br><small>any symbol on a line</small></div><div><b>×8</b></div></div>
          <div class="item"><div><b>2 of a kind</b><br><small>any symbol on a line</small></div><div><b>×2</b></div></div>
          <div class="item"><div><b>Bonus</b><br><small>exactly two ★ on a line</small></div><div><b>Pick</b></div></div>
        </div>

        <p style="margin:12px 0 0;color:var(--muted);font-size:12px;line-height:1.45;">
          Later we can add diagonal paylines and wilds — but this is already a proper “Vegas feel” foundation.
        </p>
      </div>
    </aside>
  </section>
</main>

<!-- BONUS MODAL -->
<div class="modal" id="bonusModal" aria-hidden="true">
  <div class="modalCard">
    <div class="modalHead">
      <div>
        <h3>Bonus Round</h3>
        <small>Two stars hit. Pick a card to reveal an extra multiplier.</small>
      </div>
      <button class="chip red" id="bonusClose">Close</button>
    </div>
    <div class="modalBody">
      <div class="pill">Bonus applies to: <b id="bonusLineName">—</b> line • Line Bet: <b id="bonusLineBet">—</b></div>
      <div class="cards" id="bonusCards"></div>
      <div class="result" id="bonusResult" style="margin-top:12px;">Pick a card…</div>
    </div>
  </div>
</div>

<script src="js/games/slots.js" defer></script>
<script src="js/story-engine.js"></script>
<script src="js/story-progress.js"></script>
<footer id="vv-footer"></footer>
<script type="module" src="js/ui/topbar.js"></script>
<script type="module" src="js/ui/footer.js"></script>
<script src="js/nav.js"></script>

</body>
</html>
