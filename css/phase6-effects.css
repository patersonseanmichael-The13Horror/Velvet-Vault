/* Velvet Vault - Phase 6 Effects
   1) Parallax depth
   2) Gold particle shimmer (canvas overlay, styled here)
   3) Cinematic light flicker
   4) Velvet curtain reveal
*/

/* Ensure vv-bg can host overlays */
.vv-bg{
  position: fixed;
  inset: 0;
  overflow: hidden;
  isolation: isolate;
}

/* Subtle cinematic flicker */
.vv-bg::after{
  content:"";
  position:absolute;
  inset:-10%;
  pointer-events:none;
  background:
    radial-gradient(900px 420px at 70% 20%, rgba(255,210,122,0.06), transparent 60%),
    radial-gradient(720px 380px at 20% 70%, rgba(255,35,64,0.05), transparent 60%),
    radial-gradient(800px 420px at 60% 80%, rgba(0,255,154,0.04), transparent 65%);
  mix-blend-mode: screen;
  opacity: .55;
  animation: vvFlicker 5.8s infinite;
}

@keyframes vvFlicker{
  0%{ opacity:.42; filter: blur(0px) brightness(1.0); }
  7%{ opacity:.56; filter: blur(.2px) brightness(1.03); }
  9%{ opacity:.46; filter: blur(0px) brightness(1.0); }
  18%{ opacity:.62; filter: blur(.35px) brightness(1.04); }
  22%{ opacity:.48; filter: blur(0px) brightness(1.0); }
  47%{ opacity:.58; filter: blur(.25px) brightness(1.02); }
  51%{ opacity:.43; filter: blur(0px) brightness(1.0); }
  68%{ opacity:.64; filter: blur(.4px) brightness(1.05); }
  70%{ opacity:.50; filter: blur(0px) brightness(1.0); }
  100%{ opacity:.42; filter: blur(0px) brightness(1.0); }
}

/* Parallax targets (JS applies transforms) */
.vv-bg__layer,
.vv-bg__tint,
.vv-bg__vignette,
.vv-bg__streaks,
.vv-grain{
  will-change: transform;
  transform: translate3d(0,0,0);
}

/* Gold particle canvas overlay */
.vvParticles{
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index: 6; /* above layers, below grain */
  opacity: .50;
  mix-blend-mode: screen;
}

/* Curtain reveal overlay */
.vvCurtain{
  position: fixed;
  inset: 0;
  pointer-events:none;
  z-index: 999;
  display:grid;
  grid-template-columns: 1fr 1fr;
}
.vvCurtain__panel{
  background:
    radial-gradient(1200px 700px at 50% 20%, rgba(255,35,64,0.12), transparent 65%),
    linear-gradient(180deg, rgba(16,10,24,0.98), rgba(0,0,0,0.98));
  border-right: 1px solid rgba(255,255,255,0.05);
  box-shadow: inset 0 0 120px rgba(0,0,0,0.65);
  position:relative;
  overflow:hidden;
}
.vvCurtain__panel::before{
  /* velvet texture illusion */
  content:"";
  position:absolute;
  inset:-20%;
  background:
    repeating-linear-gradient(
      90deg,
      rgba(255,255,255,0.035) 0px,
      rgba(255,255,255,0.015) 6px,
      rgba(0,0,0,0.00) 12px
    );
  opacity:.20;
  transform: rotate(-2deg);
}
.vvCurtain__panel.left{ transform: translateX(0%); }
.vvCurtain__panel.right{ transform: translateX(0%); border-right:none; border-left: 1px solid rgba(255,255,255,0.05); }

.vvCurtain.open .vvCurtain__panel.left{
  animation: vvCurtainLeft 1.05s cubic-bezier(.2,.9,.2,1) forwards;
}
.vvCurtain.open .vvCurtain__panel.right{
  animation: vvCurtainRight 1.05s cubic-bezier(.2,.9,.2,1) forwards;
}
@keyframes vvCurtainLeft{
  from{ transform: translateX(0%); }
  to{ transform: translateX(-110%); }
}
@keyframes vvCurtainRight{
  from{ transform: translateX(0%); }
  to{ transform: translateX(110%); }
}
.vvCurtain.done{ display:none; }

/* Reduced motion: disable animations */
@media (prefers-reduced-motion: reduce){
  .vv-bg::after{ animation:none; opacity:.35; }
  .vvCurtain{ display:none; }
  .vvParticles{ opacity:.25; }
}

/* Mobile throttle:
   - reduce visual intensity
   - disable flicker
   - keep particles but dimmer (JS also reduces count / FPS)
*/
@media (max-width: 640px){
  .vv-bg::after{ animation:none; opacity:.28; }
  .vvParticles{ opacity:.28; }
}
